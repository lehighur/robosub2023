<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="Gate">
    <Sequence>
      <ToggleControls/>
      <ResetPose/>
      <GoTo/>
      <Repeat num_cycles="8">
        <GoTo/>
      </Repeat>
      <ReactiveFallback>
        <Sequence>
          <GetDetectedObjects/>
          <GetGate/>
          <IsGateCentered/>
        </Sequence>
        <Repeat num_cycles="-1">
          <Sequence>
            <ResetPose/>
            <Delay delay_msec="10">
              <GoTo/>
            </Delay>
          </Sequence>
        </Repeat>
      </ReactiveFallback>
      <GoTo/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="Path">
    <Sequence>
      <ToggleControls/>
      <ResetPose/>
      <ReactiveFallback>
        <Sequence>
          <GetDetectedObjects/>
          <GetPathFront/>
          <IsPathCenteredFront/>
        </Sequence>
        <Repeat num_cycles="-1">
          <Sequence>
            <ResetPose/>
            <Delay delay_msec="10">
              <GoTo/>
            </Delay>
          </Sequence>
        </Repeat>
      </ReactiveFallback>
      <GoTo/>
      <ReactiveFallback>
        <Sequence>
          <GetDetectedObjects/>
          <GetPathBottom/>
          <IsPathCenteredBottom/>
        </Sequence>
        <Repeat num_cycles="-1">
          <Sequence>
            <ResetPose/>
            <Delay delay_msec="10">
              <GoTo/>
            </Delay>
          </Sequence>
        </Repeat>
      </ReactiveFallback>
      <GoTo/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="Buoy">
    <AlwaysSuccess/>
  </BehaviorTree>


  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="GetDetectedObjects"
            editable="true"/>
    <Action ID="GetGate"
            editable="true"/>
    <Action ID="GetPathBottom"
            editable="true"/>
    <Action ID="GetPathFront"
            editable="true"/>
    <Action ID="GoTo"
            editable="true"/>
    <Condition ID="IsGateCentered"
               editable="true"/>
    <Condition ID="IsPathCenteredBottom"
               editable="true"/>
    <Condition ID="IsPathCenteredFront"
               editable="true"/>
    <Action ID="ResetPose"
            editable="true"/>
    <Action ID="ToggleControls"
            editable="true"/>
  </TreeNodesModel>

</root>
